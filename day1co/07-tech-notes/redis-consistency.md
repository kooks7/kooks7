# Tech Note — Redis Ranking Consistency

Redis를 랭킹/인기순에 쓰면 성능은 좋아지지만, **정합성**이 핵심 이슈가 됩니다.

## 문제 유형

- 상태 변경(숨김/비활성) 시 랭킹에서 제거되지 않아 “유령 데이터”가 남음
- 정렬/가시성 변경이 여러 경로에서 발생해 캐시 업데이트가 누락됨

## 접근

- “상태 변화”를 도메인 이벤트로 정리하고, 캐시 업데이트 책임을 명확히 분리
- 인기순 set에서 삭제/정리 로직을 한 곳으로 모아 테스트 가능하게 구성
